{"mappings":"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","sources":["web/pages/Admin/Announcements.tsx"],"sourcesContent":["import { Component, For, Match, Show, Switch, createSignal, onMount } from 'solid-js'\r\nimport PageHeader from '/web/shared/PageHeader'\r\nimport { Eye, EyeOff, Plus, Save } from 'lucide-solid'\r\nimport Button from '/web/shared/Button'\r\nimport TextInput from '/web/shared/TextInput'\r\nimport { useNavigate, useParams } from '@solidjs/router'\r\nimport { announceStore, toastStore } from '/web/store'\r\nimport { elapsedSince, now } from '/common/util'\r\nimport { Toggle } from '/web/shared/Toggle'\r\nimport { getStrictForm, toLocalTime } from '/web/shared/util'\r\nimport { Pill } from '/web/shared/Card'\r\nimport { AppSchema } from '/common/types'\r\nimport { markdown } from '/web/shared/markdown'\r\n\r\nexport { AnnoucementPage as default }\r\n\r\nconst AnnoucementPage: Component = () => {\r\n  const params = useParams()\r\n\r\n  return (\r\n    <Switch>\r\n      <Match when={!params.id}>\r\n        <AnnoucementList />\r\n      </Match>\r\n\r\n      <Match when={!!params.id}>\r\n        <Announcement />\r\n      </Match>\r\n    </Switch>\r\n  )\r\n}\r\n\r\nconst AnnoucementList: Component = (props) => {\r\n  const state = announceStore()\r\n  const nav = useNavigate()\r\n\r\n  onMount(() => {\r\n    announceStore.getAllAdmin()\r\n  })\r\n\r\n  const hide = (id: string) => {\r\n    announceStore.update(id, { hide: true })\r\n  }\r\n\r\n  const unhide = (id: string) => {\r\n    announceStore.update(id, { hide: false })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PageHeader title=\"Manage Announcements\" />\r\n      <div class=\"flex w-full justify-end\">\r\n        <Button onClick={() => nav('/admin/announcements/new')}>\r\n          Create <Plus />\r\n        </Button>\r\n      </div>\r\n\r\n      <div class=\"mt-2 flex w-full flex-col gap-2\">\r\n        <For each={state.admin}>\r\n          {(item) => (\r\n            <div class=\"flex items-center gap-2\">\r\n              <div\r\n                class=\"flex w-full cursor-pointer items-center justify-between rounded-lg p-3 hover:bg-[var(--bg-700)]\"\r\n                classList={{\r\n                  hidden: !!item.deletedAt,\r\n                  'bg-900': item.hide,\r\n                  'bg-[var(--hl-700)]': !item.hide && item.showAt >= now(),\r\n                  'bg-800': !item.hide && item.showAt < now(),\r\n                }}\r\n                onClick={() => nav(`/admin/announcements/${item._id}`)}\r\n              >\r\n                <div class=\"font-bold\">{item.title}</div>\r\n                <div class=\"flex gap-1\">\r\n                  <Pill>Created: {new Date(item.showAt).toLocaleString()}</Pill>\r\n                  <Pill>{elapsedSince(new Date(item.showAt))} ago</Pill>\r\n                  {Label(item)}\r\n                </div>\r\n              </div>\r\n              <div class=\"flex min-w-fit gap-2\">\r\n                <Show when={!item.hide}>\r\n                  <Button onClick={() => hide(item._id)}>\r\n                    <Eye /> Hide\r\n                  </Button>\r\n                </Show>\r\n\r\n                <Show when={item.hide}>\r\n                  <Button schema=\"gray\" onClick={() => unhide(item._id)}>\r\n                    <EyeOff /> Unhide\r\n                  </Button>\r\n                </Show>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </For>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nfunction Label(item: AppSchema.Announcement) {\r\n  const date = new Date(item.showAt)\r\n\r\n  if (item.deletedAt) return <Pill type=\"rose\">Deleted</Pill>\r\n  if (item.hide) return <Pill type=\"coolgray\">Hidden</Pill>\r\n  if (date.valueOf() >= Date.now()) return <Pill type=\"premium\">Pending</Pill>\r\n  return <Pill type=\"green\">Active</Pill>\r\n}\r\n\r\nconst Announcement: Component<{}> = (props) => {\r\n  let ref: HTMLFormElement\r\n\r\n  const nav = useNavigate()\r\n  const params = useParams()\r\n\r\n  const state = announceStore((s) => ({ item: s.admin.find((a) => a._id === params.id) }))\r\n\r\n  const [title, setTitle] = createSignal(state.item?.title || '')\r\n  const [content, setContent] = createSignal(state.item?.content || '')\r\n  const [showAt, setShowAt] = createSignal(new Date(state.item?.showAt || now()))\r\n\r\n  onMount(() => {\r\n    announceStore.getAllAdmin()\r\n  })\r\n\r\n  const onSave = () => {\r\n    const body = getStrictForm(ref, {\r\n      title: 'string',\r\n      content: 'string',\r\n      hide: 'boolean',\r\n      showAt: 'string',\r\n    })\r\n\r\n    const showAt = new Date(body.showAt)\r\n    if (isNaN(showAt.valueOf())) {\r\n      toastStore.error(`\"Display At\" is required`)\r\n      return\r\n    }\r\n\r\n    body.showAt = showAt.toISOString()\r\n\r\n    if (params.id === 'new') {\r\n      announceStore.create(body, (announce) => {\r\n        nav(`/admin/announcements/${announce._id}`)\r\n      })\r\n    } else {\r\n      announceStore.update(params.id, body)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PageHeader title=\"Announcement\" />\r\n\r\n      <form ref={ref!} class=\"flex flex-col gap-2\">\r\n        <TextInput fieldName=\"id\" disabled value={params.id} label=\"ID\" />\r\n\r\n        <TextInput\r\n          fieldName=\"title\"\r\n          label=\"Title\"\r\n          value={state.item?.title}\r\n          onInput={(ev) => setTitle(ev.currentTarget.value)}\r\n        />\r\n        <TextInput\r\n          fieldName=\"content\"\r\n          label=\"Content\"\r\n          value={state.item?.content}\r\n          isMultiline\r\n          class=\"min-h-[80px]\"\r\n          onInput={(ev) => setContent(ev.currentTarget.value)}\r\n        />\r\n        <Toggle fieldName=\"hide\" label=\"Hide Announcement\" value={state.item?.hide} />\r\n        <TextInput\r\n          type=\"datetime-local\"\r\n          label=\"Display At\"\r\n          fieldName=\"showAt\"\r\n          value={state.item?.showAt ? toLocalTime(state.item.showAt) : toLocalTime(now())}\r\n          onChange={(ev) => setShowAt(new Date(ev.currentTarget.value))}\r\n        />\r\n\r\n        <div class=\"flex justify-end gap-2\">\r\n          <Button onClick={onSave}>\r\n            <Save /> {params.id === 'new' ? 'Create' : 'Update'}\r\n          </Button>\r\n        </div>\r\n\r\n        <div class=\"w-full rounded-md border-[1px] border-[var(--bg-600)] sm:w-1/2\">\r\n          <div class=\"flex flex-col rounded-t-md bg-[var(--hl-800)] p-2\">\r\n            <div class=\"text-lg font-bold\">{title()}</div>\r\n            <div class=\"text-700 text-xs\">{elapsedSince(showAt())} ago</div>\r\n          </div>\r\n          <div\r\n            class=\"rendered-markdown bg-900 rounded-b-md p-2\"\r\n            innerHTML={markdown.makeHtml(content())}\r\n          ></div>\r\n        </div>\r\n      </form>\r\n    </>\r\n  )\r\n}\r\n"],"names":["Component","For","Match","Show","Switch","createSignal","onMount","PageHeader","Eye","EyeOff","Plus","Save","Button","TextInput","useNavigate","useParams","announceStore","toastStore","elapsedSince","now","Toggle","getStrictForm","toLocalTime","Pill","AppSchema","markdown","AnnoucementPage","default","params","_$createComponent","children","when","id","AnnoucementList","Announcement","props","state","nav","getAllAdmin","hide","update","unhide","title","_el$","_tmpl$","cloneNode","_$insert","onClick","_el$2","_tmpl$2","each","admin","item","_el$3","_tmpl$3","_el$4","firstChild","_el$5","_el$6","nextSibling","_el$7","$$click","_id","_$memo","Date","showAt","toLocaleString","Label","schema","_$effect","_p$","_v$","deletedAt","_v$2","_v$3","_v$4","classList","toggle","undefined","date","type","valueOf","ref","HTMLFormElement","s","find","a","setTitle","content","setContent","setShowAt","onSave","body","isNaN","error","toISOString","create","announce","_el$8","_tmpl$4","_el$9","_el$10","_el$11","_el$12","_el$13","_el$14","_el$15","_ref$","_$use","fieldName","disabled","value","label","onInput","ev","currentTarget","isMultiline","onChange","innerHTML","makeHtml","_$delegateEvents"],"version":3,"file":"Announcements.4ed13ef0.js.map"}